/* Blog post page */
.post-hero { padding:clamp(6.5rem,10vw,9rem) clamp(1.5rem,5vw,3rem) clamp(3.5rem,8vw,5rem); background-color:var(--color-bg-alt); text-align:center; }
.post-hero-content { max-width:800px; margin:0 auto; }
.post-title { font-size:clamp(2rem,5vw,3rem); color:var(--color-text); margin-bottom:1.75rem; line-height:1.2; }
.post-metadata { display:flex; align-items:center; justify-content:center; gap:1.25rem; color:var(--secondary-color); flex-wrap:wrap; margin-top:1rem; }
.post-meta-item { display:flex; align-items:center; gap:.45rem; font-style:italic; color:var(--secondary-color); }
.post-meta-item i { opacity:.9; }
.post-date { font-size:1.05rem; font-style:normal; color:var(--secondary-color); }
.post-edited { font-size:1.05rem; font-style:normal; color:var(--secondary-color); }
.post-categories { display:flex; gap:.5rem; }
.post-category { background-color:rgba(0,123,255,0.1); color:var(--primary-color); padding:.25rem 1rem; border-radius:1rem; font-size:.9rem; }
.post-container { max-width:1000px; margin:0 auto; padding:clamp(2.5rem,5vw,3.5rem) clamp(1.5rem,4.5vw,3rem) 0rem; }
.post-content { background-color:var(--color-surface); border-radius:1rem; box-shadow:0 4px 18px -6px rgba(0,0,0,0.5); padding:clamp(2rem,4vw,2.75rem) clamp(1.5rem,4vw,3rem); backdrop-filter:saturate(140%) brightness(1.02); transition: background .35s ease, box-shadow .35s ease, transform .35s ease; overflow-x:hidden; }
.post-content > *:first-child { margin-top:0; }
.post-content > *:last-child { margin-bottom:0; }
.post-content mjx-container[jax="CHTML"] { max-width:100%!important; }
.post-content mjx-container[jax="CHTML"][display="true"] { display:block; overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:.5rem; margin:1rem 0; }
.post-content mjx-container[jax="CHTML"][display="false"] mjx-math { white-space:normal!important; }
@media (max-width:768px){ .post-content mjx-container[jax="CHTML"][display="true"] { font-size:.95rem; } }
.markdown { color:var(--color-text); line-height:1.7; font-size:1.1rem; }
.markdown > * { margin-top:0; margin-bottom:0; }
.markdown > *:first-child { margin-top:0; }
.markdown > *:last-child { margin-bottom:0; }
/* heading styling */
.markdown h1 { font-size:2rem; color:var(--color-text); margin:2.5rem 0 1.25rem; line-height:1.25; }
.markdown h2 { font-size:1.5rem; color:var(--color-text); margin:2rem 0 1rem; line-height:1.3; }
.markdown h3 { font-size:1.25rem; color:var(--color-text); margin:1.75rem 0 .85rem; line-height:1.35; }
.markdown p { color:var(--color-text-soft); margin:0 0 1rem; }
.markdown a { position:relative; display:inline-block; color:var(--primary-color); text-decoration:none; transition:color .25s ease; 
  /* Prevent overflow for long URLs */
  overflow-wrap:anywhere; word-break:break-word; }
/* default hover (non-external) underline */
.markdown a:not([href^="http"])::before { content:""; position:absolute; left:0; right:0; height:2px; bottom:.08em; background:currentColor; transform:scaleX(0); transform-origin:left center; opacity:.55; transition:transform .35s ease, opacity .3s ease; border-radius:2px; }
.markdown a:not([href^="http"]):hover::before,
.markdown a:not([href^="http"]):focus-visible::before { transform:scaleX(1); opacity:1; }
/* external link styling */
.markdown a[href^="http"] { padding-right:0; }
.markdown a[href^="http"]::before { content:""; position:absolute; left:0; right:0; height:2px; bottom:.08em; background:currentColor; transform:scaleX(0); transform-origin:left center; opacity:.55; transition:transform .4s ease, opacity .3s ease; border-radius:2px; }
.markdown a[href^="http"]::after { content:"↗"; font-size:.6em; position:absolute; right:-0.18em; top:-0.75em; opacity:0; transform:translate(55%,8px) scale(.88) rotate(-8deg); transition:transform .38s cubic-bezier(.4,.8,.3,1), opacity .22s ease; pointer-events:none; filter:drop-shadow(0 1px 2px rgba(0,0,0,.25)); }
.markdown a[href^="http"]:hover::before,
.markdown a[href^="http"]:focus-visible::before { transform:scaleX(1); opacity:1; }
.markdown a[href^="http"]:hover::after,
.markdown a[href^="http"]:focus-visible::after { transform:translate(55%,0) scale(1) rotate(0); opacity:1; }
.markdown a:focus-visible { outline:2px solid var(--primary-color); outline-offset:2px; }
.markdown ul,
.markdown ol { padding-left:1.75rem; margin:0 0 1rem; }
.markdown li { color:var(--color-text-soft); margin:0; }
.markdown ul li::marker { color:var(--primary-color); }
.markdown blockquote { padding:1.25rem 1.5rem; border-left:4px solid var(--primary-color); background:linear-gradient(135deg, rgba(59,130,246,0.15), rgba(59,130,246,0.05)); font-style:normal; color:var(--color-text-soft); border-radius:0 .75rem .75rem 0; margin:0 0 1rem; }
.markdown blockquote > *:not(:first-child) { font-style:italic; }
.markdown code { background:var(--color-code-bg); padding:.22rem .45rem; border-radius:6px; font-size:.85em; color:var(--color-text); box-shadow:0 0 0 1px var(--color-code-border); font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }
/* Code block – GitHub-like */
.markdown pre,
.markdown .highlight pre,
.markdown pre.highlight {
  background-color:var(--color-codeblock-bg, var(--color-code-bg)) !important;
  padding:1rem clamp(1rem,3vw,1.5rem);
  border-radius:0;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  position:relative;
  box-shadow:none;
  border:none; /* remove border per request */
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  max-width:100%;
  box-sizing:border-box;
  margin:0 0 1rem;
}
/* Remove decorative header bar/dots from previous style */
.markdown pre::before,
.markdown pre::after { content:none !important; display:none !important; }

/* Make code inside pre inherit background and spacing like GitHub */
.markdown pre code {
  background:transparent;
  padding:0;
  font-size:.95rem;
  line-height:1.55;
  position:relative;
  z-index:1;
  display:block;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  min-width:100%;
  box-shadow:none;
  border-radius:0;
}

/* Ensure Rouge wrappers have no borders either */
.markdown .highlight,
.markdown .highlighter-rouge { border:none !important; background:transparent; }

/* Copy button – subtle, shows on hover */
.markdown pre > .code-copy-btn {
  position:absolute;
  top:8px;
  right:8px;
  background:var(--color-surface);
  color:var(--color-text);
  border:1px solid var(--color-code-border);
  width:28px; height:28px; padding:0;
  font-size:.85rem; border-radius:6px; cursor:pointer;
  display:grid; place-items:center; line-height:1;
  box-shadow:0 1px 0 rgba(0,0,0,0.04);
  opacity:1; visibility:visible; transform:none;
  transition:opacity .2s ease, transform .2s ease;
  z-index:20;
}
.markdown pre:hover > .code-copy-btn,
.markdown pre:focus-within > .code-copy-btn { opacity:1; visibility:visible; transform:none; }
.markdown pre > .code-copy-btn .copy-icon { display:block; line-height:1; position:relative; top:0; font-size:14px; width:auto; height:auto; }
.markdown pre .code-copy-btn:focus-visible { outline:2px solid var(--primary-color); outline-offset:2px; }
.markdown pre > .code-copy-btn.copied {
  background:var(--primary-color);
  color:#fff!important;
  border-color:var(--primary-color);
}
.markdown pre code::before { content:none; }
.markdown .video-wrapper {
  position:relative;
  width:100%;
  background-color:var(--color-surface);
  border-radius:0.9rem;
  box-shadow:0 6px 20px -8px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.04);
  overflow:hidden;
  padding-bottom:56.25%;
  margin:0 0 1rem;
}
.markdown .video-wrapper iframe {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:0;
  display:block;
}
.markdown img { max-width:100%; height:auto; border-radius:0.9rem; box-shadow:0 6px 20px -8px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.04); transition: transform .35s ease, box-shadow .35s ease; margin:0 0 1rem; }
/* indicate images can be expanded */
.markdown img { cursor: pointer; }
.markdown table { width:100%; border-collapse:collapse; margin:0 0 1rem; }
.markdown table th,
.markdown table td { padding:.85rem 1rem; border-bottom:1px solid var(--color-border); text-align:left; }
.markdown table thead th { border-bottom:2px solid var(--color-border); }
.markdown hr { margin:2.5rem 0; border:none; border-top:1px solid var(--color-border); opacity:.5; }
.markdown figcaption { font-size:.95rem; color:var(--secondary-color); margin:.5rem 0 0; text-align:center; }
.post-footer { max-width:1000px; margin:1.5rem auto 3rem; padding:0 clamp(1.5rem,4vw,2.5rem); }
.post-nav { display:flex; justify-content:space-between; gap:2.5rem; }
.post-nav-link { flex:1; padding:1.5rem; background:var(--color-surface); border-radius:1rem; box-shadow:0 2px 10px -2px rgba(0,0,0,0.45); text-decoration:none; transition:transform .3s ease, box-shadow .3s ease, background .3s ease; position:relative; overflow:hidden; }
.post-nav-link::before { content:''; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%, rgba(59,130,246,0.18), transparent 70%); opacity:0; transition:opacity .4s ease; }
.post-nav-link:hover { transform:translateY(-4px); box-shadow:0 8px 28px -10px rgba(0,0,0,0.65); }
.post-nav-link:hover::before { opacity:1; }
.post-nav-link.prev { text-align:left; }
.post-nav-link.next { text-align:right; }
.post-nav-label { display:block; font-size:.9rem; color:var(--secondary-color); margin-bottom:.5rem; }
.post-nav-title { display:block; font-size:1.1rem; color:var(--color-text); font-weight:500; }
/* Lightbox overlay for post images */
.post-lightbox { position:fixed; inset:0; padding:2rem; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.85); opacity:0; visibility:hidden; transition:opacity .25s ease, visibility .25s ease; z-index:2000; }
.post-lightbox.active { opacity:1; visibility:visible; }
.post-lightbox img { max-width:min(96vw, 1200px); max-height:90vh; border-radius:.75rem; box-shadow:0 10px 40px rgba(0,0,0,0.6); }
@media (max-width:992px){
	.post-container { padding:clamp(2.2rem,6vw,3rem) clamp(1.25rem,5vw,2.25rem) 0rem; }
	.post-content { padding:clamp(1.75rem,5vw,2.25rem) clamp(1.25rem,5vw,2.25rem); }
	.post-nav { gap:1.75rem; }
}
@media (max-width:768px){
	.post-hero { padding:5.75rem 1.25rem 3rem; }
	.post-container { padding:1.75rem 1.25rem 0rem; }
	/* keep card comfortable on narrow viewports */
	.post-content { padding:1.5rem 1.25rem 2rem; }
	.markdown { font-size:1rem; }
	.markdown h1 { font-size:1.75rem; }
	.markdown h2 { font-size:1.5rem; }
	.markdown h3 { font-size:1.25rem; }
	.post-nav { flex-direction:column; gap:1.25rem; }
	/* show Next post first on mobile */
	.post-nav-link.next { order:0; }
	.post-nav-link.prev { order:1; }
	.post-nav-link { text-align:center!important; width:100%; margin:0; border-radius:1rem; padding:1.35rem; }
	.post-footer { padding:0 1.25rem; margin:1.5rem auto 2rem; }
}
