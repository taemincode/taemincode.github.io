/* Blog post page */
.post-hero { padding:8rem 2rem 4rem; background-color:var(--color-bg-alt); text-align:center; }
.post-hero-content { max-width:800px; margin:0 auto; }
.post-title { font-size:clamp(2rem,5vw,3rem); color:var(--color-text); margin-bottom:1.5rem; line-height:1.2; }
.post-metadata { display:flex; align-items:center; justify-content:center; gap:1.25rem; color:var(--secondary-color); flex-wrap:wrap; }
.post-meta-item { display:flex; align-items:center; gap:.45rem; font-style:italic; color:var(--secondary-color); }
.post-meta-item i { opacity:.9; }
.post-date { font-size:1.05rem; font-style:normal; color:var(--secondary-color); }
.post-edited { font-size:1.05rem; font-style:normal; color:var(--secondary-color); }
.post-categories { display:flex; gap:.5rem; }
.post-category { background-color:rgba(0,123,255,0.1); color:var(--primary-color); padding:.25rem 1rem; border-radius:1rem; font-size:.9rem; }
.post-container { max-width:1000px; margin:0 auto; padding:2rem 2rem; }
.post-content { background-color:var(--color-surface); border-radius:1rem; box-shadow:0 4px 18px -6px rgba(0,0,0,0.5); padding:.1px 2rem 2rem; backdrop-filter:saturate(140%) brightness(1.02); transition: background .35s ease, box-shadow .35s ease, transform .35s ease; overflow-x:hidden; }
.post-content mjx-container[jax="CHTML"] { max-width:100%!important; }
.post-content mjx-container[jax="CHTML"][display="true"] { display:block; overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:.5rem; margin:1rem 0; }
.post-content mjx-container[jax="CHTML"][display="false"] mjx-math { white-space:normal!important; }
@media (max-width:768px){ .post-content mjx-container[jax="CHTML"][display="true"] { font-size:.95rem; } }
.markdown { color:var(--color-text); line-height:1.8; font-size:1.1rem; --markdown-flow-space:clamp(1.25rem, 1.05rem + 1.1vw, 1.95rem); --markdown-heading-space:clamp(2.1rem, 1.7rem + 2vw, 3.05rem); --markdown-subheading-space:clamp(1.75rem, 1.45rem + 1.5vw, 2.45rem); --markdown-tertiary-space:clamp(1.5rem, 1.25rem + 1.1vw, 2.05rem); --markdown-tight-space:clamp(.95rem, 0.8rem + 0.7vw, 1.4rem); }
.markdown > * { margin-top:0; margin-bottom:0; }
.markdown > * + * { margin-top:var(--markdown-flow-space); }
/* heading styling */
.markdown h1 { font-size:2rem; margin-top:var(--markdown-heading-space); margin-bottom:.75rem; color:var(--color-text); }
.markdown h2 { font-size:1.5rem; margin-top:var(--markdown-subheading-space); margin-bottom:.65rem; color:var(--color-text); }
.markdown h3 { font-size:1.25rem; margin-top:var(--markdown-tertiary-space); margin-bottom:.55rem; color:var(--color-text); }
/* If an image precedes a heading, subtract the shared image margin to avoid doubled spacing */
.markdown img + h1 { margin-top:calc(var(--markdown-heading-space) - (var(--markdown-tight-space) * 0.85)); }
.markdown img + h2 { margin-top:calc(var(--markdown-subheading-space) - (var(--markdown-tight-space) * 0.65)); }
.markdown img + h3 { margin-top:calc(var(--markdown-tertiary-space) - (var(--markdown-tight-space) * 0.6)); }
.markdown > :first-child { margin-top:0; }
.markdown p { margin:0; color:var(--color-text-soft); }
.markdown a { position:relative; display:inline-block; color:var(--primary-color); text-decoration:none; transition:color .25s ease; 
  /* Prevent overflow for long URLs */
  overflow-wrap:anywhere; word-break:break-word; }
/* default hover (non-external) underline */
.markdown a:not([href^="http"])::before { content:""; position:absolute; left:0; right:0; height:2px; bottom:.08em; background:currentColor; transform:scaleX(0); transform-origin:left center; opacity:.55; transition:transform .35s ease, opacity .3s ease; border-radius:2px; }
.markdown a:not([href^="http"]):hover::before,
.markdown a:not([href^="http"]):focus-visible::before { transform:scaleX(1); opacity:1; }
/* external link styling */
.markdown a[href^="http"] { padding-right:0; }
.markdown a[href^="http"]::before { content:""; position:absolute; left:0; right:0; height:2px; bottom:.08em; background:currentColor; transform:scaleX(0); transform-origin:left center; opacity:.55; transition:transform .4s ease, opacity .3s ease; border-radius:2px; }
.markdown a[href^="http"]::after { content:"↗"; font-size:.6em; position:absolute; right:-0.18em; top:-0.75em; opacity:0; transform:translate(55%,8px) scale(.88) rotate(-8deg); transition:transform .38s cubic-bezier(.4,.8,.3,1), opacity .22s ease; pointer-events:none; filter:drop-shadow(0 1px 2px rgba(0,0,0,.25)); }
.markdown a[href^="http"]:hover::before,
.markdown a[href^="http"]:focus-visible::before { transform:scaleX(1); opacity:1; }
.markdown a[href^="http"]:hover::after,
.markdown a[href^="http"]:focus-visible::after { transform:translate(55%,0) scale(1) rotate(0); opacity:1; }
.markdown a:focus-visible { outline:2px solid var(--primary-color); outline-offset:2px; }
.markdown ul,.markdown ol { margin:0; padding-left:1.75rem; }
.markdown li { margin-bottom:.5rem; color:var(--color-text-soft); }
.markdown ul li::marker { color:var(--primary-color); }
.markdown li > ul,
.markdown li > ol { margin-top:calc(var(--markdown-tight-space) * 0.8); }
.markdown blockquote { margin:var(--markdown-flow-space) 0; padding:1rem 1.25rem 1rem 1.25rem; border-left:4px solid var(--primary-color); background:linear-gradient(135deg, rgba(59,130,246,0.15), rgba(59,130,246,0.05)); font-style:normal; color:var(--color-text-soft); border-radius:0 .75rem .75rem 0; }
.markdown blockquote > *:not(:first-child) { font-style:italic; }
.markdown code { background:var(--color-code-bg); padding:.22rem .45rem; border-radius:6px; font-size:.85em; color:var(--color-text); box-shadow:0 0 0 1px var(--color-code-border); font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }
/* Code block – GitHub-like */
.markdown pre,
.markdown .highlight pre,
.markdown pre.highlight {
  background-color:var(--color-codeblock-bg, var(--color-code-bg)) !important;
  padding:.875rem 1rem;
  border-radius:0;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  margin:0;
  position:relative;
  box-shadow:none;
  border:none; /* remove border per request */
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  max-width:100%;
  box-sizing:border-box;
}
/* Remove decorative header bar/dots from previous style */
.markdown pre::before,
.markdown pre::after { content:none !important; display:none !important; }

/* Make code inside pre inherit background and spacing like GitHub */
.markdown pre code {
  background:transparent;
  padding:0;
  font-size:.95rem;
  line-height:1.55;
  position:relative;
  z-index:1;
  display:block;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  min-width:100%;
  box-shadow:none;
  border-radius:0;
}

/* Ensure Rouge wrappers have no borders either */
.markdown .highlight,
.markdown .highlighter-rouge { border:none !important; background:transparent; }

/* Copy button – subtle, shows on hover */
.markdown pre > .code-copy-btn {
  position:absolute;
  top:8px;
  right:8px;
  background:var(--color-surface);
  color:var(--color-text);
  border:1px solid var(--color-code-border);
  width:28px; height:28px; padding:0;
  font-size:.85rem; border-radius:6px; cursor:pointer;
  display:grid; place-items:center; line-height:1;
  box-shadow:0 1px 0 rgba(0,0,0,0.04);
  opacity:1; visibility:visible; transform:none;
  transition:opacity .2s ease, transform .2s ease;
  z-index:20;
}
.markdown pre:hover > .code-copy-btn,
.markdown pre:focus-within > .code-copy-btn { opacity:1; visibility:visible; transform:none; }
.markdown pre > .code-copy-btn .copy-icon { display:block; line-height:1; position:relative; top:0; font-size:14px; width:auto; height:auto; }
.markdown pre .code-copy-btn:focus-visible { outline:2px solid var(--primary-color); outline-offset:2px; }
.markdown pre > .code-copy-btn.copied {
  background:var(--primary-color);
  color:#fff!important;
  border-color:var(--primary-color);
}
.markdown pre code::before { content:none; }
.markdown .video-wrapper {
  position:relative;
  width:100%;
  margin:calc(var(--markdown-flow-space) + 0.5rem) 0;
  background-color:var(--color-surface);
  border-radius:0.9rem;
  box-shadow:0 6px 20px -8px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.04);
  overflow:hidden;
  padding-bottom:56.25%;
}
.markdown .video-wrapper iframe {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:0;
  display:block;
}
.markdown img { max-width:100%; height:auto; border-radius:0.9rem; margin:var(--markdown-tight-space) 0 calc(var(--markdown-tight-space) * 0.55); box-shadow:0 6px 20px -8px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.04); transition: transform .35s ease, box-shadow .35s ease; }
/* When a post starts with an inline image block, tighten the gap before the next section */
.markdown > img:first-child,
.markdown > figure:first-child,
/* JS fallback for :has() - add .img-only-child class to p:first-child with only an img */
.markdown > p.img-only-child {
  margin-bottom:calc(var(--markdown-tight-space) * 0.35);
}
.markdown > p.img-only-child > img {
  margin-top:calc(var(--markdown-tight-space) * 0.7);
  margin-bottom:calc(var(--markdown-tight-space) * 0.35);
}
.markdown > img:first-child + *,
.markdown > figure:first-child + *,
.markdown > p.img-only-child + * {
  margin-top:calc(var(--markdown-flow-space) - (var(--markdown-tight-space) * 0.3));
}
/* indicate images can be expanded */
.markdown img { cursor: pointer; }
.post-footer { max-width:1000px; margin:0 auto 4rem; padding:0 2rem; }
.post-nav { display:flex; justify-content:space-between; gap:2rem; }
.post-nav-link { flex:1; padding:1.5rem; background:var(--color-surface); border-radius:1rem; box-shadow:0 2px 10px -2px rgba(0,0,0,0.45); text-decoration:none; transition:transform .3s ease, box-shadow .3s ease, background .3s ease; position:relative; overflow:hidden; }
.post-nav-link::before { content:''; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%, rgba(59,130,246,0.18), transparent 70%); opacity:0; transition:opacity .4s ease; }
.post-nav-link:hover { transform:translateY(-4px); box-shadow:0 8px 28px -10px rgba(0,0,0,0.65); }
.post-nav-link:hover::before { opacity:1; }
.post-nav-link.prev { text-align:left; }
.post-nav-link.next { text-align:right; }
.post-nav-label { display:block; font-size:.9rem; color:var(--secondary-color); margin-bottom:.5rem; }
.post-nav-title { display:block; font-size:1.1rem; color:var(--color-text); font-weight:500; }
/* Lightbox overlay for post images */
.post-lightbox { position:fixed; inset:0; padding:2rem; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.85); opacity:0; visibility:hidden; transition:opacity .25s ease, visibility .25s ease; z-index:2000; }
.post-lightbox.active { opacity:1; visibility:visible; }
.post-lightbox img { max-width:min(96vw, 1200px); max-height:90vh; border-radius:.75rem; box-shadow:0 10px 40px rgba(0,0,0,0.6); }
@media (max-width:768px){
	.post-hero { padding:7.2rem 1rem 3rem; }
	.post-container { padding:2rem 1rem; }
	/* tighten top spacing inside the post card on mobile */
	.post-content { padding:.75rem 1rem 1.25rem; }
	/* avoid large initial jump caused by first element margins */
	.post-content > :first-child { margin-top:1rem; }
	.markdown { font-size:1rem; --markdown-flow-space:1.05rem; --markdown-heading-space:1.8rem; --markdown-subheading-space:1.5rem; --markdown-tertiary-space:1.3rem; --markdown-tight-space:.75rem; }
	.markdown h1 { font-size:1.75rem; }
	.markdown h2 { font-size:1.5rem; }
	.markdown h3 { font-size:1.25rem; }
	.post-nav { flex-direction:column; gap:1rem; }
	/* show Next post first on mobile */
	.post-nav-link.next { order:0; }
	.post-nav-link.prev { order:1; }
	.post-nav-link { text-align:center!important; width:100%; margin:0; border-radius:1rem; }
	.post-footer { padding:0 1rem; }
}
